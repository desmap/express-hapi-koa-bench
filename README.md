## express-hapi-koa-bench

### Intro

Just wanted to check the current state of node web servers but then added also nim's jester.

### Source

`server.*` gets a http request and responds with `Hello World!`.

### Server
A $20-Vultr-VM was used a server. Requesting server was in same city.

### Results
#### node
##### express
```
$ npx autocannon -c 100 -d 5 -p 10 <ip>:4001
100 connections with 10 pipelining factor

┌─────────┬──────┬──────┬───────┬───────┬─────────┬───────┬───────────┐
│ Stat    │ 2.5% │ 50%  │ 97.5% │ 99%   │ Avg     │ Stdev │ Max       │
├─────────┼──────┼──────┼───────┼───────┼─────────┼───────┼───────────┤
│ Latency │ 0 ms │ 0 ms │ 30 ms │ 47 ms │ 4.23 ms │ 12 ms │ 209.26 ms │
└─────────┴──────┴──────┴───────┴───────┴─────────┴───────┴───────────┘
┌───────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┐
│ Stat      │ 1%      │ 2.5%    │ 50%     │ 97.5%   │ Avg     │ Stdev   │ Min     │
├───────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ Req/Sec   │ 11943   │ 11943   │ 24703   │ 28447   │ 22925.6 │ 5916.31 │ 11936   │
├───────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ Bytes/Sec │ 2.58 MB │ 2.58 MB │ 5.34 MB │ 6.14 MB │ 4.95 MB │ 1.28 MB │ 2.58 MB │
└───────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┘

Req/Bytes counts sampled once per second.

115k requests in 5.08s, 24.8 MB read
```
##### hapi
```
npx autocannon -c 100 -d 5 -p 10 <ip>:4002
100 connections with 10 pipelining factor

┌─────────┬──────┬──────┬───────┬───────┬─────────┬──────────┬───────────┐
│ Stat    │ 2.5% │ 50%  │ 97.5% │ 99%   │ Avg     │ Stdev    │ Max       │
├─────────┼──────┼──────┼───────┼───────┼─────────┼──────────┼───────────┤
│ Latency │ 0 ms │ 0 ms │ 42 ms │ 66 ms │ 5.64 ms │ 14.89 ms │ 243.36 ms │
└─────────┴──────┴──────┴───────┴───────┴─────────┴──────────┴───────────┘
┌───────────┬─────────┬─────────┬─────────┬─────────┬──────────┬─────────┬─────────┐
│ Stat      │ 1%      │ 2.5%    │ 50%     │ 97.5%   │ Avg      │ Stdev   │ Min     │
├───────────┼─────────┼─────────┼─────────┼─────────┼──────────┼─────────┼─────────┤
│ Req/Sec   │ 12751   │ 12751   │ 17647   │ 20895   │ 17346.41 │ 2655.94 │ 12749   │
├───────────┼─────────┼─────────┼─────────┼─────────┼──────────┼─────────┼─────────┤
│ Bytes/Sec │ 2.53 MB │ 2.53 MB │ 3.49 MB │ 4.13 MB │ 3.43 MB  │ 525 kB  │ 2.52 MB │
└───────────┴─────────┴─────────┴─────────┴─────────┴──────────┴─────────┴─────────┘

Req/Bytes counts sampled once per second.

87k requests in 5.09s, 17.2 MB read
```
##### koa
```
$ npx autocannon -c 100 -d 5 -p 10 <ip>:4003
100 connections with 10 pipelining factor

┌─────────┬──────┬──────┬───────┬───────┬─────────┬─────────┬───────────┐
│ Stat    │ 2.5% │ 50%  │ 97.5% │ 99%   │ Avg     │ Stdev   │ Max       │
├─────────┼──────┼──────┼───────┼───────┼─────────┼─────────┼───────────┤
│ Latency │ 0 ms │ 0 ms │ 17 ms │ 21 ms │ 2.74 ms │ 6.62 ms │ 237.33 ms │
└─────────┴──────┴──────┴───────┴───────┴─────────┴─────────┴───────────┘
┌───────────┬─────────┬─────────┬────────┬─────────┬─────────┬─────────┬─────────┐
│ Stat      │ 1%      │ 2.5%    │ 50%    │ 97.5%   │ Avg     │ Stdev   │ Min     │
├───────────┼─────────┼─────────┼────────┼─────────┼─────────┼─────────┼─────────┤
│ Req/Sec   │ 31295   │ 31295   │ 35295  │ 40575   │ 35313.6 │ 3102.75 │ 31283   │
├───────────┼─────────┼─────────┼────────┼─────────┼─────────┼─────────┼─────────┤
│ Bytes/Sec │ 4.79 MB │ 4.79 MB │ 5.4 MB │ 6.21 MB │ 5.4 MB  │ 476 kB  │ 4.79 MB │
└───────────┴─────────┴─────────┴────────┴─────────┴─────────┴─────────┴─────────┘

Req/Bytes counts sampled once per second.

177k requests in 5.1s, 27 MB read
```
#### nim
##### jester
Source compiled with `-d:release`.
```
d@v:~$ npx autocannon -c 100 -d 5 -p 10 <ip>:5000
100 connections with 10 pipelining factor

┌─────────┬──────┬──────┬───────┬───────┬─────────┬─────────┬───────────┐
│ Stat    │ 2.5% │ 50%  │ 97.5% │ 99%   │ Avg     │ Stdev   │ Max       │
├─────────┼──────┼──────┼───────┼───────┼─────────┼─────────┼───────────┤
│ Latency │ 0 ms │ 0 ms │ 20 ms │ 24 ms │ 2.09 ms │ 7.05 ms │ 143.93 ms │
└─────────┴──────┴──────┴───────┴───────┴─────────┴─────────┴───────────┘
┌───────────┬─────────┬─────────┬─────────┬─────────┬─────────┬──────────┬─────────┐
│ Stat      │ 1%      │ 2.5%    │ 50%     │ 97.5%   │ Avg     │ Stdev    │ Min     │
├───────────┼─────────┼─────────┼─────────┼─────────┼─────────┼──────────┼─────────┤
│ Req/Sec   │ 24911   │ 24911   │ 50719   │ 55455   │ 46715.2 │ 11154.27 │ 24900   │
├───────────┼─────────┼─────────┼─────────┼─────────┼─────────┼──────────┼─────────┤
│ Bytes/Sec │ 3.61 MB │ 3.61 MB │ 7.35 MB │ 8.04 MB │ 6.77 MB │ 1.62 MB  │ 3.61 MB │
└───────────┴─────────┴─────────┴─────────┴─────────┴─────────┴──────────┴─────────┘

Req/Bytes counts sampled once per second.

234k requests in 5.11s, 33.9 MB read
```
